<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Lab41">
  
  <title>Web App Structure - Lab41 Gestalt</title>
  

  <link rel="shortcut icon" href="../../../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Web App Structure";
    var mkdocs_page_input_path = "prototypes/tablet/webappstructure.md";
    var mkdocs_page_url = "/prototypes/tablet/webappstructure/";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js"></script>
  <script src="../../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../../js/highlight.pack.js"></script>
  <script src="../../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> Lab41 Gestalt</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../../..">Gestalt</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Scaffolds</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scaffolds/">About</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scaffolds/installation/">Installation</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../scaffolds/quickstart/">Quick Start</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Prototypes</span></li>

        
            
    <ul class="subnav">
    <li><span>Desktop</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../desktop/">About</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../desktop/quickstart/">Quick Start</a>
        
    </li>

        
    </ul>

        
            
    <ul class="subnav">
    <li><span>Tablet</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../">About</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../quickstart/">Quick Start</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Web App Structure</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#web-app-structure">Web App Structure</a></li>
                
                    <li><a class="toctree-l4" href="#angular-mvc">Angular MVC</a></li>
                
                    <li><a class="toctree-l4" href="#angular-ui-router">Angular UI-Router</a></li>
                
                    <li><a class="toctree-l4" href="#app-entry-point">App Entry Point</a></li>
                
                    <li><a class="toctree-l4" href="#menu">Menu</a></li>
                
                    <li><a class="toctree-l4" href="#panel">Panel</a></li>
                
                    <li><a class="toctree-l4" href="#story">Story</a></li>
                
            
            </ul>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Datasets</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../datasets/bis/">BIS</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../datasets/oecd/">OECD</a>
        
    </li>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Reading Groups</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../readings/">Reading List</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../readings/05272016/">05/27/2016</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../../readings/06032016/">06/03/2016</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">Lab41 Gestalt</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Prototypes &raquo;</li>
        
      
        
          <li>Tablet &raquo;</li>
        
      
    
    <li>Web App Structure</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="web-app-structure">Web App Structure</h1>
<p>Because we use Angular 1.0 and there are many different ways to implement the framework, the following is an attempt to make our engineering of the prototype transparent. We are trying to follow <a href="https://github.com/johnpapa/angular-styleguide/blob/master/a1/README.md" title="John Papa's Angular 1 Style Guide">these standards</a>. The main concept is the idea of single responsibility (1 component per file and ideally less than 400 lines of code). In practice, this means a lot of files and a lot of linkages between files. The following maps out our implementation to aid in modification.</p>
<h2 id="angular-mvc">Angular MVC</h2>
<p>The documentation follows the order of <strong>View -&gt; Controller -&gt; Model</strong> because that seems the most intuitive to understand the structure.</p>
<ul>
<li><strong>View</strong> - Users interact with the view (HTML/CSS)</li>
<li><strong>Controller</strong> - Controllers perform changes on the model (JavaScript)</li>
<li><strong>Model</strong> - Data</li>
</ul>
<h2 id="angular-ui-router">Angular UI-Router</h2>
<p>Routing in this implementation of Angular/Ionic uses <a href="http://angular-ui.github.io/ui-router/site/#/api/ui.router" title="UI-Router">UI-Router</a> so some of the specific template reference relationships are unique to this spec. All states are configured in <code>js/app.js</code>.</p>
<hr />
<h2 id="app-entry-point">App Entry Point</h2>
<table>
<thead>
<tr>
<th>UI-Router state</th>
<th>Angular View</th>
<th>Angular Controller</th>
<th>Angular Model</th>
</tr>
</thead>
<tbody>
<tr>
<td>decides which state loads based on URL match</td>
<td>decides which HTML file is displayed</td>
<td>decides which JavsScript file controls the view</td>
<td>decides how data is structured for the view</td>
</tr>
<tr>
<td>menu</td>
<td>index.html</td>
<td>none</td>
<td>none</td>
</tr>
</tbody>
</table>
<h3 id="state-menu">State: menu</h3>
<pre><code class="javascript">.state(&quot;menu&quot;, {
    url: &quot;/&quot;,
    abstract: true,
    template: &quot;&lt;ion-nav-view name='menu'&gt;&lt;/ion-nav-view&gt;&quot;
});
</code></pre>

<p>The reason this prototype is set up with the menu state as the highest-level state and as an abstract state is due to the specific implementation of the Ionic Framework when working with their menu directives. It is also the reason why two ion-nav-views are nested inside each other.</p>
<h3 id="template-indexhtml">Template: index.html</h3>
<pre><code class="html">&lt;!-- ONLY RELEVANT CODE SHOWN --&gt;
&lt;body&gt;

    &lt;!-- renders app view --&gt;
    &lt;ion-nav-view&gt;&lt;/ion-nav-view&gt;

&lt;/body&gt;
</code></pre>

<table>
<thead>
<tr>
<th>Abstract Illustration</th>
<th>Implementation Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="index.html" src="../imgs/template-index.png" title="Index Template" /></td>
<td><img alt="index.html" src="../imgs/template-index-implement.png" title="Index Template" /></td>
</tr>
</tbody>
</table>
<h3 id="controller-none">Controller: none</h3>
<p>There is no overarching controller for this view because at this point we do not need one but you can easily add one should your use case require it. If one existed, it would be declared inside the state object.</p>
<h3 id="model-none">Model: none</h3>
<p>There is no overarching model for this view because currently no data needs to be accessed by the user at this level of the app.</p>
<hr />
<h2 id="menu">Menu</h2>
<table>
<thead>
<tr>
<th>UI-Router state</th>
<th>Angular View</th>
<th>Angular Controller</th>
<th>Angular Model</th>
</tr>
</thead>
<tbody>
<tr>
<td>decides which state loads based on URL match</td>
<td>decides which HTML file is displayed</td>
<td>decides which JavsScript file controls the view</td>
<td>decides how data is structured for the view</td>
</tr>
<tr>
<td>app</td>
<td>app.html</td>
<td>app-controller.js</td>
<td><code>/* Layout */ api/workspaces/&lt;username&gt;</code> <code>/* Content */ api/data/TBD</code></td>
</tr>
</tbody>
</table>
<h3 id="state-menu_1">State: menu</h3>
<pre><code class="javascript">.state(&quot;app&quot;, {
    url: &quot;/{workspace}&quot;,
    abstract: true,
    templateUrl: &quot;templates/app.html&quot;,
    controller: &quot;appCtrl&quot;
});
</code></pre>

<h3 id="template-apphtml">Template: app.html</h3>
<pre><code class="html">&lt;!-- ONLY RELEVANT CODE SHOWN --&gt;
&lt;!-- FROM INDEX.HTML --&gt;
&lt;body&gt;

    &lt;ion-nav-view&gt;

        &lt;!-- FROM MENU STATE TEMPLATE --&gt;
        &lt;ion-nav-view name=&quot;menu&quot;&gt;

            &lt;!-- FROM APP.HTML --&gt;
            &lt;!-- renders center menu from Ionic Framework --&gt;
            &lt;ion-side-menu-content&gt;

                &lt;!-- renders panel navigation --&gt;
                &lt;div&gt;&lt;/div&gt;

                &lt;!-- renders panel view --&gt;
                &lt;ion-nav-view name=&quot;panel&quot;&gt;&lt;/ion-nav-view&gt;

            &lt;/ion-side-menu-content&gt;

            &lt;!-- renders left menu from Ionic Framework --&gt;
            &lt;ion-side-menu side=&quot;left&quot;&gt;&lt;/ion-side-menu&gt;

        &lt;/ion-nav-view&gt;

    &lt;/ion-nav-view&gt;

&lt;/body&gt;
</code></pre>

<p>The app is set up in a series of panels which are the highest-level organization of information. Panels usually simply organize smaller bits of content into a organized group.</p>
<table>
<thead>
<tr>
<th>Abstract Illustration</th>
<th>Implementation Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="app.html" src="../imgs/template-app.png" title="App Template" /></td>
<td><img alt="app.html" src="../imgs/template-app-implement.png" title="App Template" /></td>
</tr>
</tbody>
</table>
<h3 id="controller-appctrl">Controller: appCtrl</h3>
<pre><code class="JavaScript">// ONLY RELEVANT CODE SHOWN
// get LAYOUT data stored in service    
layoutService.getPanels($rootScope.globals.currentUser.username).then(function(data) {

    // set scope
    $scope.panels = data;

});
</code></pre>

<p>Notice that there is no specific <code>contentService</code> API call for this state. This is because at this point there is no panel-specific content needing to be rendered into the app and often there will never be an API call for content at this level.</p>
<h3 id="model">Model:</h3>
<p><strong>Layout</strong>
<code>api/workspaces/&lt;username&gt;</code></p>
<pre><code class="JavaScript">// truncated for legibility
[
    {
        &quot;_id&quot;: &quot;1&quot;,
        &quot;title&quot;: &quot;Panel 1&quot;,
        &quot;description&quot;: &quot;&quot;,
        &quot;url&quot;: {
            &quot;param&quot;: &quot;navitem1&quot;
        }
    },
    {
        &quot;_id&quot;: &quot;2&quot;,
        &quot;title&quot;: &quot;Panel 2&quot;,
        &quot;description&quot;: &quot;&quot;,
        &quot;url&quot;: {
            &quot;param&quot;: &quot;navitem2&quot;
        }
    },
    {
        &quot;_id&quot;: &quot;3&quot;,
        &quot;title&quot;: &quot;Panel 3&quot;,
        &quot;description&quot;: &quot;&quot;,
        &quot;url&quot;: {
            &quot;param&quot;: &quot;navitem3&quot;
        }
    },
    ...
]
</code></pre>

<p>Username is an optional parameter. For our purposes we may want to experiement with different layouts/data scopes for specific users and thus need a model for that specificity.</p>
<p><strong>Content</strong>
<code>api/data/TBD</code></p>
<p>Content may or may not make sense at a panel level inside this application. For now it is TBD and not coded in the controller to request any content for the panels.</p>
<hr />
<h2 id="panel">Panel</h2>
<table>
<thead>
<tr>
<th>UI-Router state</th>
<th>Angular View</th>
<th>Angular Controller</th>
<th>Angular Model</th>
</tr>
</thead>
<tbody>
<tr>
<td>decides which state loads based on URL match</td>
<td>decides which HTML file is displayed</td>
<td>decides which JavsScript file controls the view</td>
<td>decides how data is structured for the view</td>
</tr>
<tr>
<td>panel</td>
<td>panel.html</td>
<td>panel-controller.js</td>
<td><code>/* Layout */ api/workspaces/&lt;username&gt;</code> <code>/* Content */ api/data/&lt;panelParam&gt;</code></td>
</tr>
</tbody>
</table>
<h3 id="state-panel">State: panel</h3>
<pre><code class="javascript">.state(&quot;app.panel&quot;, {
    url: &quot;/{panel}&quot;,
    views: {
        &quot;panel&quot;: { // note this key must match the &quot;name&quot; in the HTML parent template
            templateUrl: &quot;templates/panel.html&quot;,
            controller: &quot;panelCtrl&quot;
        }
    }
});
</code></pre>

<h3 id="template-panelhtml">Template: panel.html</h3>
<pre><code class="html">&lt;!-- ONLY RELEVANT CODE SHOWN --&gt;
&lt;!-- FROM INDEX.HTML --&gt;
&lt;body&gt;

    &lt;ion-nav-view&gt;

        &lt;!-- FROM MENU STATE TEMPLATE --&gt;
        &lt;ion-nav-view name=&quot;menu&quot;&gt;

            &lt;!-- FROM APP.HTML --&gt;
            &lt;!-- renders center menu from Ionic Framework --&gt;
            &lt;ion-side-menu-content&gt;

                &lt;!-- renders panel navigation --&gt;
                &lt;div&gt;&lt;/div&gt;

                &lt;!-- renders panel view --&gt;
                &lt;ion-nav-view name=&quot;panel&quot;&gt;

                    &lt;!-- FROM PANEL.HTML --&gt;
                    &lt;!-- renders panel content --&gt;
                    &lt;ion-view&gt;&lt;/ion-view&gt;

                &lt;/ion-nav-view&gt;

            &lt;/ion-side-menu-content&gt;

            &lt;!-- renders left menu from Ionic Framework --&gt;
            &lt;ion-side-menu side=&quot;left&quot;&gt;&lt;/ion-side-menu&gt;

        &lt;/ion-nav-view&gt;

    &lt;/ion-nav-view&gt;

&lt;/body&gt;
</code></pre>

<p>Each panel is set up as a series of stories. We may not need this level of abstraction but it allows us to group stories in logical collections like possibly "contagion stories", "gdp stories", etc.</p>
<table>
<thead>
<tr>
<th>Abstract Illustration</th>
<th>Implementation Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="panel.html" src="../imgs/template-panel.png" title="Panel Template" /></td>
<td><img alt="panel.html" src="../imgs/template-panel-implement.png" title="Panel Template" /></td>
</tr>
</tbody>
</table>
<h3 id="controller-panelctrl">Controller: panelCtrl</h3>
<pre><code class="JavaScript">// ONLY RELEVANT CODE SHOWN
// get LAYOUT data stored in service    
layoutService.getPanel(panel).then(function(data) {

    // set scope
    $scope.panel = data;

});

// get CONTENT data stored in service
contentService.getData(panel).then(function(data) {

    // set scope
    $scope.content = data.length &gt; 0 ? data : [{ title: &quot;Nothing Found.&quot;, content: &quot;Sorry but can't find any content.&quot;, poster: &quot;None&quot; }];

});
</code></pre>

<p>Because the panel state is dedicated to a single panel at a time both the <code>layoutService</code> and the <code>contentService</code> load a single panel's layout and content versus loading all of them for each panel.</p>
<h3 id="model_1">Model:</h3>
<p><strong>Layout</strong>
<code>api/workspaces/&lt;username&gt;</code></p>
<pre><code class="JavaScript">{
    &quot;_id&quot;: &quot;2&quot;,
    &quot;title&quot;: &quot;Panel 2&quot;,
    &quot;description&quot;: &quot;&quot;,
    &quot;url&quot;: {
        &quot;param&quot;: &quot;navitem2&quot;
    }
}
</code></pre>

<p>Username is an optional parameter. For our purposes we may want to experiement with different layouts/data scopes for specific users and thus need a model for that specificity. Based on the active panel the workspace will return just that single panel's layout data.</p>
<p><strong>Content</strong>
<code>api/data/&lt;panelParam&gt;</code></p>
<pre><code class="JavaScript">[
    {
        &quot;name&quot;: &quot;story1&quot;
    },
    {
        &quot;name&quot;: &quot;story2&quot;
    },
    {
        &quot;name&quot;: &quot;story3&quot;
    }
]
</code></pre>

<p>The <code>contentService</code> takes the panel param as returned by the <code>layoutService</code> and queries the content database for that panel's data.</p>
<hr />
<h2 id="story">Story</h2>
<table>
<thead>
<tr>
<th>UI-Router state</th>
<th>Angular View</th>
<th>Angular Controller</th>
<th>Angular Model</th>
</tr>
</thead>
<tbody>
<tr>
<td>decides which state loads based on URL match</td>
<td>decides which HTML file is displayed</td>
<td>decides which JavsScript file controls the view</td>
<td>decides how data is structured for the view</td>
</tr>
<tr>
<td>story</td>
<td>story.html</td>
<td>story-controller.js</td>
<td><code>/* Layout */ TBD</code> <code>/* Content */ api/data/&lt;storyParam&gt;</code></td>
</tr>
</tbody>
</table>
<h3 id="state-story">State: story</h3>
<pre><code class="javascript">.state(&quot;app.story&quot;, {
    url: &quot;/detail/{id}&quot;,
    views: {
        &quot;panel&quot;: { // note this means a story loads in the panel container (and not a dedicated story container)
            templateUrl: &quot;templates/story.html&quot;,
            controller: &quot;storyCtrl&quot;
        }
    }
});
</code></pre>

<h3 id="template-storyhtml">Template: story.html</h3>
<pre><code class="html">&lt;!-- ONLY RELEVANT CODE SHOWN --&gt;
&lt;!-- FROM INDEX.HTML --&gt;
&lt;body&gt;

    &lt;ion-nav-view&gt;

        &lt;!-- FROM MENU STATE TEMPLATE --&gt;
        &lt;ion-nav-view name=&quot;menu&quot;&gt;

            &lt;!-- FROM APP.HTML --&gt;
            &lt;!-- renders center menu from Ionic Framework --&gt;
            &lt;ion-side-menu-content&gt;

                &lt;!-- renders panel navigation --&gt;
                &lt;div&gt;&lt;/div&gt;

                &lt;!-- renders panel view --&gt;
                &lt;ion-nav-view name=&quot;panel&quot;&gt;

                    &lt;!-- FROM PANEL.HTML --&gt;
                    &lt;!-- renders story content --&gt;
                    &lt;ion-view&gt;&lt;/ion-view&gt;

                &lt;/ion-nav-view&gt;

            &lt;/ion-side-menu-content&gt;

            &lt;!-- renders left menu from Ionic Framework --&gt;
            &lt;ion-side-menu side=&quot;left&quot;&gt;&lt;/ion-side-menu&gt;

        &lt;/ion-nav-view&gt;

    &lt;/ion-nav-view&gt;

&lt;/body&gt;
</code></pre>

<p>Each individual story will render in an entire panel view and not have a unique view alongside a panel view but will replace the panel of stories with the single story when the story state is activated.</p>
<table>
<thead>
<tr>
<th>Abstract Illustration</th>
<th>Implementation Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="story.html" src="../imgs/template-story.png" title="Story Template" /></td>
<td><img alt="story.html" src="../imgs/template-story-implement.png" title="Story Template" /></td>
</tr>
</tbody>
</table>
<h3 id="controller-storyctrl">Controller: storyCtrl</h3>
<pre><code class="JavaScript">// ONLY RELEVANT CODE SHOWN
// get CONTENT data stored in service
contentService.getData(story).then(function(data) {

    // set scope
    $scope.content = data;

});
</code></pre>

<p>Currently all stories use the same layout, however we could implement a layout specific to each story and then would need a <code>layout-service</code>.</p>
<h3 id="model_2">Model:</h3>
<p><strong>Layout</strong>
None</p>
<p><strong>Content</strong>
<code>api/data/&lt;storyParam&gt;</code></p>
<pre><code class="JavaScript">{
    &quot;name&quot;: &quot;story 2&quot;,
    &quot;description&quot;: &quot;this is story two, TBD visualization&quot;
}
</code></pre>

<p>The <code>contentService</code> takes the story param as returned by the <code>layoutService</code> and queries the content database for that story's data.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../../datasets/bis/" class="btn btn-neutral float-right" title="BIS">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../quickstart/" class="btn btn-neutral" title="Quick Start"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../quickstart/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../../../datasets/bis/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
